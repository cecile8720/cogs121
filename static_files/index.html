<!DOCTYPE html>
<html>

<head>
  <title>My Trips</title>

  <!-- Firebase initialization pls dont touch -->
  <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyBU1zQlcACqaOhTPhsPNyQkh1RYFf2cdYU",
      authDomain: "collegeburnouts.firebaseapp.com",
      databaseURL: "https://collegeburnouts.firebaseio.com",
      projectId: "collegeburnouts",
      storageBucket: "collegeburnouts.appspot.com",
      messagingSenderId: "890814837618"
    };
    firebase.initializeApp(config);
  </script>




  <link rel="stylesheet" type="text/css" href="css/index.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script type="text/javascript">
  // jQuery convention for running when the document has been fully loaded:
  $(document).ready(() => {

    // NPS data retrieval for Yellowstone
    $.ajax({
      url: 'https://developer.nps.gov/api/v1/parks?q=Yellowstone&api_key=pEHcIgdfn7FtEcQa1aUUfUpOEr6c58GjQYKJ2YB2',
      type: 'GET',
      dataType: 'json',
      success: (data) => {
        console.log('you actually received some data', data);
        console.table(data.data);
        // display data on page
        $('#current-trip-name').html(data.data[1].fullName);
        $('#states').html(data.data[1].states);
        $('#des').html(data.data[1].description);
        $('#weather').html(data.data[1].weatherInfo);
        //console.log(data.data[0].url);

        /*for (const e of Object.keys(data)) {
          console.log(e, '->', data.data[e]);
        }*/
        /*
        Object.keys(data.data).forEach((e) => {
          console.log('Title: ->', data.data[e].title);
        });*/
      }
    });

    $('#Zion').click(() => {
      console.log("clicked");
      $.ajax({
        url: 'https://developer.nps.gov/api/v1/parks?q=Yellowstone&api_key=pEHcIgdfn7FtEcQa1aUUfUpOEr6c58GjQYKJ2YB2',
        //url: 'https://developer.nps.gov/api/v1/visitorcenters?q=Yellowstone&api_key=pEHcIgdfn7FtEcQa1aUUfUpOEr6c58GjQYKJ2YB2',
        type: 'GET',
        dataType: 'json',
        success: (data) => {
          //console.log('aja actually worked');
          console.log('you actually received some data', data);
          console.table(data.data);
          //console.log(data.data[0].url);
          //$('#des').html(data.data[0].title);
          /*for (const e of Object.keys(data)) {
            console.log(e, '->', data.data[e]);
          }*/
          /*
          Object.keys(data.data).forEach((e) => {
            console.log('Title: ->', data.data[e].title);
          });*/
        }
      });
    });



    const database = firebase.database();
    console.log("reached");
    database.ref('location/Yellowstone').set({description: 'Wyoming, 3,471 mi^2', hours: '7AM-11PM', contact: '(307) 344-7381'});
    database.ref('location/Zion').set({description: 'Utah, 229 mi^2', hours: '6AM-11PM', contact: '(435) 772-3256'});

    /*
    $('#Zion').click(() => {
      const key = 'location/' + $('#Zion').text();
      database.ref(key).once('value', (snapshot) => {
        const data = snapshot.val();
        console.log('data retrieved', data);
        $('#current-trip-name').html($('#Zion').text());
        $('#des').html(data.description);
        $('#hours').html(data.hours);
        $('#contact').html(data.contact);

      })
    });*/

    $('#Yellowstone').click(() => {
      const key = 'location/' + $('#Yellowstone').text();
      database.ref(key).once('value', (snapshot) => {
        const data = snapshot.val();
        console.log('data retrieved', data);
        $('#current-trip-name').html($('#Yellowstone').text());
        $('#des').html(data.description);
        $('#hours').html(data.hours);
        $('#contact').html(data.contact);

      })
    });

  });
  </script>


</head>

<body>
  <a name="top"></a>
	<div>
		<div class="header">
			<img id="hamburger" class="icon header" src="img/hamburger-menu.png">
			<h2 class="current-location">Current Location</h2>
			<img class="icon" src="img/location-icon.png">
			<a href="nature-finder.html"><img id="leaf-icon" class="icon header" src="img/leaf-icon.png"></a>
		</div>

		<div class="menu">
			<a href="" class="disabled">My Trips</a>
			<a href="map.html" class="button">Map</a>
			<a href="trail-list.html" class="button">Trails</a>
			<a href="photos.html" class="button">Photos</a>
		</div>
	</div>

	<hr>

	<div class="content">
		<div class="current-trip"> <!-- Current Trip -->
			<h2>Current Trip: <span id="current-trip-name"></span><h2>

			<div> <!-- Location overview -->
				<h4>Location overview: </h4>
				<ul >
          <li class="loc-info">State(s): </li>
            <p class="p_text" id="states"></p>
					<li class="loc-info">Description: </li>
						<p class="p_text" id="des"></p>
          <li class="loc-info">Weather: </li>
  					<p class="p_text" id="weather"></p>


<!--
        	<li>Hours of Operation: </li>
						<ul><li id="hours">7AM-11PM</li></ul>
					<li>Contact Information: </li>
						<ul><li id="contact">(307) 344-7381</li></ul> -->
				</ul>
			</div>

			<div> <!-- Trails Saved -->
				<h4>Trails Saved: </h4>
        <!-- <a href="trail1.html"><div class="saved-trail"> -->
				<a href="saved-trail.html"><div class="saved-trail">
					<img src="https://placekitten.com/330/150">
					<div>Saved Trail #1</div>
				</div></a>
        <!-- <a href="trail2.html"<div class="saved-trail"> -->
				<a href="saved-trail.html"><div class="saved-trail">
					<img src="https://placekitten.com/330/150">
					<div>Saved Trail #2</div>
				</div></a>
			</div>
		</div>

	<hr>
<!-- Other Trips
		<div>
			<h2>Other Trips: </h2>
			<div>
        <a href="#top"><button class="tripButtons" id="Zion">Zion</button></a>
        <a href="#top"><button class="tripButtons" id="Yellowstone">Yellowstone</button></a>
-->
        <!-- I needed to make buttons we can fix the shape
        <a href"yosemite.html" class="othertrip">Yosemite</a>
				<a href"zion.html" class="othertrip">Zion</a>
				<a href"sequoia.html" class="othertrip">Sequoia</a>
        -->

        <!-- new trip input -->
        <br/> <br/> <h2> Search other locations </h2>
        <input id="locationBox" type="text" size="20"/>
        <button id="addLocation">Search</button>

			</div>
		</div>

	</div>
</body>

</html>
